<html>
<head>
	<meta name="robots" content="follow">
	<title>Diceware</title>
	<base target="_blank">
  	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.9.0/css/all.css" />
  	<style type="text/css">
		body{
			font-family: verdana;
		}
        table,tr,td{
            font-size: small;
        }
		#title{
			font-size: x-large;
		}
		input,textarea{
			font-family: verdana;
			font-size: large;
		}    
        input[type=number]{
            width: 40px;
        }
        input[type=text]{
            width: 30px;
        }
		.pwd{
			font-weight: bold;
		}
		#options{
			display: none;
		}
		fieldset {
			padding:10px;
			width:65%;
			line-height:1.8;
			overflow: auto;
		}

	</style>	
	
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="list.js"></script>
	<script type="text/javascript" src="latinize.js"></script>
	<script type="text/javascript">
		function getRandom(which) {
			var min = 0;
			if (which == "w"){
				var max = dict.length - 1;
				return Math.floor(Math.random() * (max - min) + min);
			}
			if (which == "s"){
				var max = symbols.length - 1;
				return Math.floor(Math.random() * (max - min) + min);
			}
			if (which == "n"){
				min = 1;
				var max = 999;
				return Math.floor(Math.random() * (max - min) + min);
			}
		}
        
        function generate(){
            alert("Em construção");
			$("#options").hide();
			var words = parseInt($("#words").val(), 10);
			
			var length = parseInt($("#length").val(), 10);
			
			var separator = $("#separator").val();
			if (separator.length == 0) separator = " ";
			var randomSeparator = $("#randomSep").is(':checked');
			if (randomSeparator){
				var idx = getRandom("s");
				separator = symbols[idx] 
			}	
			var removeAccents = $("#accents").is(':checked');
			
			var digits = $("#digits").is(':checked');
			
			var casing = $("input:radio[name ='case']:checked").val();
			
			for (var i = 1;i <= 3; i++){
				var passwd = "";
				for (var j = 1;j <= words; j++){
					var idx = getRandom("w");
					var word = dict[idx] 
					while (word.length < length){
						idx = getRandom("w");
						word = dict[idx] 
					}		
					if (removeAccents) word = word.latinize();			
					passwd += word + (j == words?"":separator);
				}
				if (digits) passwd += separator + getRandom("n");
				$("#output" + i).text(passwd);
			}
			$("#options").show();
        }
		
		function toClip(){
			document.getElementById("txtShort").select();
			document.execCommand("copy");
		}
	</script>
	
</head>
<body>
	<h1>Diceware <i style="font-weight:bold;" class="fas fa-dice"></i></h1>
	
    <label for="words">Quantas palavras?</label> 
    <input type="number" id="words" name="words" value="6" placeholder="palavras" min="3" max="20" /><br /><br/>
    
    <label for="length">Tamanho mínimo das palavras?</label> 
    <input type="number" id="length" name="length" value="5"  placeholder="tamanho" min="3" max="15" /><br /><br/>

    <label>Formato das palavras?</label> 
    <input type="radio" value="uppercase" name="case" />MAIÚSCULAS
    <input type="radio" value="lowercase" name="case" checked="checked"/>minúsculas
    <input type="radio" value="titlecase" name="case" />Primeira Maiúscula<br/><br/>
    
    <label for="separator">Separador das palavras (padrão: espaço)</label> 
    <input type="text" id="separator" name="separator" value="" maxlength="1" /><input type="checkbox" id="randomSep" />Aleatório<br /><br/>

    <input type="checkbox" id="accents" checked="checked" />Remover acentos<br/><br />
    
    <input type="checkbox" id="digits" />Terminar com números?<br/><br />

    <input type="button" id="sbmt" value="Gerar" onclick="generate();" /><br/><br />
    
	<fieldset width="50%" id="options">
		<legend>Opções</legend>
		<div id="output1" class="pwd"></div>
		<div id="output2" class="pwd"></div>
		<div id="output3" class="pwd"></div>
	</fieldset>

    <p>
		<hr />
		<i>Ideia original de Arnold Reinhold: <a href="http://world.std.com/~reinhold/diceware.html" target="_blank">Diceware</a></i>
	</p>	

</body>
</html>